[{"id":"a431cb7a.d719a8","type":"http in","z":"deb0d57.1c46528","name":"Turn off LED","url":"room/parent/led/offlight","method":"get","upload":false,"swaggerDoc":"","x":183.00003814697266,"y":1247.3331232070923,"wires":[["5940789d.b6ce38"]]},{"id":"5940789d.b6ce38","type":"function","z":"deb0d57.1c46528","name":"Send Command to Off LED","func":"global.set('ledparent','off')\nmsg.payload = {'stopparent': 'off'}\nreturn msg;","outputs":1,"noerr":0,"x":413.00003814697266,"y":1247.3331232070923,"wires":[["e8bad253.ee5db","a70dbdb6.17c12","db771f3c.086d2"]]},{"id":"988a0d2.dfab2f","type":"http response","z":"deb0d57.1c46528","name":"Off LED in parentroom","statusCode":"","headers":{},"x":472.0000686645508,"y":1311.3331241607666,"wires":[]},{"id":"e8bad253.ee5db","type":"template","z":"deb0d57.1c46528","name":"Status of LED","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!-- CSS -->\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\n<center>\n<div>LED has been turned {{payload.stopparent}}</div>\n<div><a href='/'>Go back</div>\n</center>","output":"str","x":250.00005340576172,"y":1311.3331241607666,"wires":[["988a0d2.dfab2f"]]},{"id":"4adbf51c.7c689c","type":"http in","z":"deb0d57.1c46528","name":"Turn off LED","url":"room/baby/led/offlight","method":"get","upload":false,"swaggerDoc":"","x":192.0000457763672,"y":1406.3331260681152,"wires":[["5370da2d.78b724"]]},{"id":"5370da2d.78b724","type":"function","z":"deb0d57.1c46528","name":"Send Command to Off LED","func":"global.set('ledbaby','off')\nmsg.payload = {'stopbaby': 'off'}\nreturn msg;","outputs":1,"noerr":0,"x":420.0000534057617,"y":1405.3330764770508,"wires":[["2fbb0ba4.ea3f44","48fa59ee.2a53a8","b1347baa.e41eb8"]]},{"id":"1872c418.7824fc","type":"http response","z":"deb0d57.1c46528","name":"Off LED in babyroom","statusCode":"","headers":{},"x":465.0000686645508,"y":1474.3331260681152,"wires":[]},{"id":"2fbb0ba4.ea3f44","type":"template","z":"deb0d57.1c46528","name":"Status of LED","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!-- CSS -->\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\n<center>\n<div>LED has been turned {{payload.stopbaby}}</div>\n<div><a href='/'>Go back</div>\n</center>","output":"str","x":245.0000457763672,"y":1478.3331260681152,"wires":[["1872c418.7824fc"]]},{"id":"caeb204b.de8b3","type":"http response","z":"deb0d57.1c46528","name":"On LED in parentroom","statusCode":"","headers":{},"x":474.0000686645508,"y":1174.333122253418,"wires":[]},{"id":"49fe12a5.978abc","type":"template","z":"deb0d57.1c46528","name":"Status of LED","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!-- CSS -->\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\n<center>\n<div>LED has been turned {{payload.startparent}}</div>\n<div><a href='/'>Go back</div>\n</center>","output":"str","x":255.0000457763672,"y":1174.333122253418,"wires":[["caeb204b.de8b3"]]},{"id":"2de0cccf.068d24","type":"function","z":"deb0d57.1c46528","name":"Send Command to On LED","func":"global.set('ledparent','on')\nmsg.payload = {'startparent': 'on'}\nreturn msg;","outputs":1,"noerr":0,"x":454.0000534057617,"y":1095.333122253418,"wires":[["49fe12a5.978abc","db771f3c.086d2","a70dbdb6.17c12"]]},{"id":"f33dbb56.bc9718","type":"http in","z":"deb0d57.1c46528","name":"Turn on LED","url":"room/parent/led/onlight","method":"get","upload":false,"swaggerDoc":"","x":208.00003814697266,"y":1096.3331212997437,"wires":[["2de0cccf.068d24"]]},{"id":"9b9e5e9f.84cd6","type":"http response","z":"deb0d57.1c46528","name":"On LED in babyroom","statusCode":"","headers":{},"x":452.0000686645508,"y":1639.3330936431885,"wires":[]},{"id":"865099ef.af6188","type":"template","z":"deb0d57.1c46528","name":"Status of LED","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!-- CSS -->\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\n<center>\n<div>LED has been turned {{payload.startbaby}}</div>\n<div><a href='/'>Go back</div>\n</center>\n","output":"str","x":231.00005340576172,"y":1638.3331298828125,"wires":[["9b9e5e9f.84cd6"]]},{"id":"28ccbc7b.341644","type":"function","z":"deb0d57.1c46528","name":"Send Command to On LED","func":"global.set('ledbaby','on')\nmsg.payload = {'startbaby': 'on'}\nreturn msg;","outputs":1,"noerr":0,"x":433.0000457763672,"y":1561.3330917358398,"wires":[["865099ef.af6188","48fa59ee.2a53a8","b1347baa.e41eb8"]]},{"id":"4070667e.246df8","type":"http in","z":"deb0d57.1c46528","name":"Turn on LED","url":"room/baby/led/onlight","method":"get","upload":false,"swaggerDoc":"","x":186.00003814697266,"y":1561.3330926895142,"wires":[["28ccbc7b.341644"]]},{"id":"48fa59ee.2a53a8","type":"ibmiot out","z":"deb0d57.1c46528","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"ledid-SLEEPDEEP","deviceType":"led-SLEEPDEEP","eventCommandType":"stopstartbabyled","format":"json","data":"{}","qos":"1","name":"My Raspberry Pi Gateway","service":"registered","x":776.0000610351562,"y":1499.9331283569336,"wires":[]},{"id":"1d0999d0.483d06","type":"template","z":"deb0d57.1c46528","name":"Page Format","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!DOCTYPE HTML>\n\n<html>\n  <head>\n    <title>Baby Monitoring</title>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"keywords\" content=\"\" />\n      \n      <!-- CSS -->\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\t\t\n\t\t<!-- JS -->\n\t\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js\"></script>\n\n    </head>\n\n  <body class=\"landing\">\n    \n\n\n\n         <section class=\"wrapper style1\">\n                <div class=\"container\">\n                  <header class=\"major\">\n                    <h2>Parent's Night Light</h2>\n                    <p>Simply click onto the respective buttons to control the night light\n                    in your room </p>\n                  </header>\n                  <center>\n                    <p>LED Status</p>\n                   <img src=\"{{payloadparent.ledparent}}\" >\n                    \n                    \n                    <br><br>    \n                      <a href=\"/room/parent/led/onlight\" id=\"b1\"class=\"button special\" >Turn on</a>\n                      <a href=\"/room/parent/led/offlight\" id=\"b2\" class=\"button special\">Turn off</a>\n                  </center>\n                </div>\n              </section>\n\n            <!-- Footer -->\n        <footer id=\"footer\">\n          <span class=\"copyright\">\n            &copy; Copyright. All rights reserved. Design by <a href=\"http://www.html5webtemplates.co.uk\">Responsive Web Templates</a>\n          </span>\n        </footer>\n\n    </body>\n\n    <script src=\"https://ca2sd.mybluemix.net/js/jquery.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/jquery.scrolly.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/skel.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/init.js\"></script>\n</html>\n","output":"str","x":640.0001068115234,"y":876.000207901001,"wires":[["65fe40c9.8cbc5"]]},{"id":"9688ee78.02468","type":"http in","z":"deb0d57.1c46528","name":"parentroomled","url":"/room/parent/led","method":"get","upload":false,"swaggerDoc":"","x":175.00006103515625,"y":875.0001106262207,"wires":[["ca83045.d0616f8"]]},{"id":"ca83045.d0616f8","type":"function","z":"deb0d57.1c46528","name":"Send LED status","func":"led = global.get('ledparent');\nif (led === 'on') {\n    msg.payloadparent = {'ledparent': '../../images/ledon.png'};\n}\nelse {\n    msg.payloadparent = {'ledparent': '../../images/ledoff.png'};\n}\nreturn msg;","outputs":1,"noerr":0,"x":429.00010681152344,"y":875.9999160766602,"wires":[["1d0999d0.483d06"]]},{"id":"65fe40c9.8cbc5","type":"http response","z":"deb0d57.1c46528","name":"parentroom","statusCode":"","headers":{},"x":841.0000610351562,"y":875.0001106262207,"wires":[]},{"id":"d9838b07.1fd178","type":"http in","z":"deb0d57.1c46528","name":"babyroomled","url":"/room/baby/led","method":"get","upload":false,"swaggerDoc":"","x":178.00011444091797,"y":963.0000143051147,"wires":[["ef7834e2.ad6c78"]]},{"id":"a18d2a66.2e4638","type":"template","z":"deb0d57.1c46528","name":"Page Format","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!DOCTYPE HTML>\n\n<html>\n  <head>\n    <title>Baby Monitoring</title>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"keywords\" content=\"\" />\n      \n      <!-- CSS -->\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\t\t\n\t\t<!-- JS -->\n\t\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js\"></script>\n\n    </head>\n\n  <body class=\"landing\">\n\n\n         <section class=\"wrapper style1\">\n                <div class=\"container\">\n                  <header class=\"major\">\n                    <h2>Baby's Night Light</h2>\n                    <p>Simply click onto the respective buttons to control the night light\n                    in your room </p>\n                  </header>\n                  <center>\n                    <p>LED Status</p>\n                   <img src=\"{{payloadbaby.ledbaby}}\" >\n                    \n                    \n                    <br><br>    \n                      <a href=\"/room/baby/led/onlight\" id=\"b1\"class=\"button special\" >Turn on</a>\n                      <a href=\"/room/baby/led/offlight\" id=\"b2\" class=\"button special\">Turn off</a>\n                  </center>\n                </div>\n              </section>\n\n            <!-- Footer -->\n        <footer id=\"footer\">\n          <span class=\"copyright\">\n            &copy; Copyright. All rights reserved. Design by <a href=\"http://www.html5webtemplates.co.uk\">Responsive Web Templates</a>\n          </span>\n        </footer>\n\n    </body>\n\n    <script src=\"https://ca2sd.mybluemix.net/js/jquery.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/jquery.scrolly.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/skel.min.js\"></script>\n    <script src=\"https://ca2sd.mybluemix.net/js/init.js\"></script>\n</html>\n","output":"str","x":639.0000610351562,"y":959.0000133514404,"wires":[["235839b.97625c6"]]},{"id":"235839b.97625c6","type":"http response","z":"deb0d57.1c46528","name":"babyroom","statusCode":"","headers":{},"x":837.0000610351562,"y":957.0000133514404,"wires":[]},{"id":"ef7834e2.ad6c78","type":"function","z":"deb0d57.1c46528","name":"Send LED status","func":"led = global.get('ledbaby');\nif (led === 'on') {\n    msg.payloadbaby = {'ledbaby': '../../images/ledon.png'};\n}\nelse {\n    msg.payloadbaby = {'ledbaby': '../../images/ledoff.png'};\n}\nreturn msg;","outputs":1,"noerr":0,"x":423.00012969970703,"y":961.0000133514404,"wires":[["a18d2a66.2e4638"]]},{"id":"a81d7e18.2567c","type":"function","z":"deb0d57.1c46528","name":"set msg payload","func":"parenttemp = global.get('parenttemp');\nbabytemp = global.get('babytemp');\nbabystatus = global.get('babystatus');\nif (parenttemp !== null){\nmsg.payloadparentt= {'parenttemp':parenttemp}\n}\nif (babytemp !== null){\nmsg.payloadbabyt = {'babytemp':babytemp}\n}\n\nif (babystatus === 'awake') {\n    msg.payloadbabys = {'owlpic': 'images/awake.png',\n    'babystatus': 'Awake'};\n    \n}\nelse {\n    msg.payloadbabys = {'owlpic': 'images/asleep.png',\n    'babystatus': 'Asleep'};\n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"x":651.0000076293945,"y":702.0000095367432,"wires":[["71931b72.581c44"]]},{"id":"544b43d9.55bb4c","type":"http response","z":"deb0d57.1c46528","name":"home page","statusCode":"","headers":{},"x":868.0000152587891,"y":761.0001087188721,"wires":[]},{"id":"71931b72.581c44","type":"template","z":"deb0d57.1c46528","name":"homepage","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!-- \nTan Ru Bin P1625231\nIoT CA1 Assignment AY1819\nindex.html is the main and only page for the assignment\nPage includes real time graph, latest received room temperature,\nremote control of light, datatable for times when the buzzer rang.\n-->\n<!DOCTYPE HTML>\n\n<html>\n\t<head>\n\t\t<title>Baby Monitoring</title>\n\t\t<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\n\t\t<meta name=\"description\" content=\"\" />\n\t\t<meta name=\"keywords\" content=\"\" />\n\t    \n\t    <!-- CSS -->\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style.css\" />\n\t\t<link rel=\"stylesheet\" href=\"https://ca2sd.mybluemix.net/css/style-xlarge.css\" />\n\t\t\n\t\t<!-- JS -->\n\t\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js\"></script>\n\t\n\t\n</head>\n\t<body class=\"landing\">\n\n\t\t<!-- Banner -->\n\t\t\t<section id=\"banner\">\n\t\t\t\t<div class=\"inner\">\n\t\t\t\t\t<h2>Welcome to SleepDeep</h2>\n\t\t\n\t\t\t\t\t<ul class=\"actions\">\n\t\t\t\t\t\t<li><a href=\"#one\" class=\"button big scrolly\">Get Started</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</section>\n\n\t\t<!-- Purpose -->\n\t\t\t<section id=\"one\" class=\"wrapper style1\">\n\t\t\t\t<div class=\"container\">\n\t\t\t\t\t<header class=\"major\">\n\t\t\t\t\t\t<h2>Purpose</h2>\n\t\t\t\t\t\t<p>To learn and observe the sleeping patterns based on the room temperature. Motion\n\t\t\t\t\t\tand temperature statistics is given in this webpage to distinguish which temperature is most optimal \n\t\t\t\t\t\tfor you or your baby to have a good night's sleep.</p>\n\t\t\t\t\t</header>\n\t\t\t\t\t<div class=\"slider\">\n\t\t\t\t\t\t<div class=\"viewer\">\n\t\t\t\t\t\t\t<div class=\"reel\">\n\t\t\t\t\t\t\t\t<div class=\"slide\">\n\t\t\t\t\t\t\t\t\t<img src=\"https://ca2sd.mybluemix.net/images/slpbaby1.jpg\" alt=\"\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t\n\t\t\n\t\t\t\n\t\t<!-- Real time Graph -->\n\t\t\t<section class=\"wrapper style1\">\n\t\t\t\t<div class=\"container\">\n\t\t\t\t\t<header class=\"major\">\n\t\t\t\t\t\t<h2>Temperature and Motion Graph</h2>\n\t\t\t\t\t\t<p>Diagram below shows the relationship of how temperature affects the baby by plotting\n\t\t\t\t\t\tdown the number of motions detected within 10mins along with the temperature during the duration</p>\n\t\t\t\t\t</header>\n\t\t\t\t\t<!-- go to link -->\n\t\t\t\t\t<a href =\"https://ca2sd.mybluemix.net/ui/#/0\">See graph</a>\n\t\t\t\t\t\n\t\t\t</section>\n\t\t\t\n\t  <!-- Light switch -->\n\t        <section class=\"wrapper style1\">\n\t\t\t\t<div class=\"container\">\n\t\t\t\t\t<header class=\"major\">\n\t\t\t\t\t\t<h2> Night Light Control Page</h2>\n\t\t\t\t\t\t<p>Simply click onto the respective buttons to control the night light\n\t\t\t\t\t\tin you or your baby's room </p>\n\t\t\t\t\t</header>\n\t\t\t\t\t<center>\n\t\t\t\t\t\t<p style=\"font-size:1.5em; font-weight:bold;\">Baby Room</p>\n\t\t\t\t\t\t<a href=\"/room/baby/led\"><img src=\"images/ledon.png\" ></a>\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t<p style=\"font-size:1.5em; font-weight:bold;\">Parent Room</p>\n\t\t\t\t\t\t<a href=\"/room/parent/led\"><img src=\"images/ledon.png\" ></a>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t\n\t\t\t\n\t\t\t\n\t    <!-- See if awake or not -->\n\t\t    <section class=\"wrapper style1\">\n\t\t\t\t<div class=\"container\">\n\t\t\t\t\t<header class=\"major\">\n\t\t\t\t\t\t<h2>Sleep check</h2>\n\t\t\t\t\t\t<p>Picture below shows if baby is asleep or not based on amount of movement in the room</p>\n\t\t\t\t\t</header>\n\t\t\t\t\t<center>\n\t\t\t\t\t\t<p>Baby is currently</p>\n\t\t\t\t\t\t<img src='{{payloadbabys.owlpic}}'>\n\t\t\t\t\t\t<p style=\"font-size:1.5em; font-weight:bold;\">{{payloadbabys.babystatus}} </p>\n\t\t\t\t\t</center>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t\t\t\n\t\t\n\t\t\n\t\t<!-- CTA -->\n\t\t\n\t\t\t<section id=\"cta\" class=\"wrapper style3\">\n\t\t\t\t<h1>Back to Top</h1>\n\t\t\t\t<ul class=\"actions\">\n\t\t\t\t\t<li><a href=\"#\" class=\"button big\">Go</a></li>\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t\t\n\t\t<!-- Footer -->\n\t\t\t<footer id=\"footer\">\n\t\t\t\t<span class=\"copyright\">\n\t\t\t\t\t&copy; Copyright. All rights reserved. Design by <a href=\"http://www.html5webtemplates.co.uk\">Responsive Web Templates</a>\n\t\t\t\t</span>\n\t\t\t</footer>\n\n\t</body>\n\t\n\t    <script src=\"https://ca2sd.mybluemix.net/js/jquery.min.js\"></script>\n\t\t<script src=\"https://ca2sd.mybluemix.net/js/jquery.scrolly.min.js\"></script>\n\t\t<script src=\"https://ca2sd.mybluemix.net/js/skel.min.js\"></script>\n\t\t<script src=\"https://ca2sd.mybluemix.net/js/init.js\"></script>\n</html>","output":"str","x":862.0000114440918,"y":701.0001087188721,"wires":[["544b43d9.55bb4c"]]},{"id":"be5c24b6.c0f128","type":"http in","z":"deb0d57.1c46528","name":"home page","url":"/","method":"get","upload":false,"swaggerDoc":"","x":444.99996185302734,"y":767.0001087188721,"wires":[["a81d7e18.2567c"]]},{"id":"b3415321.5b116","type":"function","z":"deb0d57.1c46528","name":"global.set.motion/temp/status","func":"parenttemp = msg.payload.d.parenttemp;\nparentmotion = msg.payload.d.parentmotion;\nbabytemp = msg.payload.d.babytemp;\nbabymotion = msg.payload.d.babymotion;\nglobal.set('parentmotion',parentmotion);\nglobal.set('parenttemp',parenttemp);\nglobal.set('babytemp',babytemp);\nglobal.set('babymotion',babymotion);\nif (babymotion >= 50) {\n    global.set('babystatus', 'awake');\n}\nif (babymotion <= 50) {\n    global.set('babystatus', 'asleep');\n}","outputs":1,"noerr":0,"x":385.9999542236328,"y":703.5999126434326,"wires":[["a81d7e18.2567c"]]},{"id":"b1347baa.e41eb8","type":"debug","z":"deb0d57.1c46528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":718.0000114440918,"y":1417.0001201629639,"wires":[]},{"id":"a70dbdb6.17c12","type":"debug","z":"deb0d57.1c46528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":780.0000076293945,"y":1282.3332214355469,"wires":[]},{"id":"31c8039c.e4bf1c","type":"function","z":"deb0d57.1c46528","name":"declare graph values for baby room","func":"var msg = {};\nvar msg1 = {};\n\nmsg.payload=global.get('babytemp');\nmsg.topic='Temperature';\nmsg1.payload=global.get('babymotion');\nmsg1.topic='Motion';\nreturn [msg,msg1];","outputs":2,"noerr":0,"x":373.1667022705078,"y":358.6667060852051,"wires":[["21e3bdac.967da2"],["21e3bdac.967da2","1b803a04.8b5246"]]},{"id":"21e3bdac.967da2","type":"ui_chart","z":"deb0d57.1c46528","name":"","group":"ded99fb9.d9d15","order":1,"width":"0","height":"0","label":"Baby Motion Temperature Line Chart","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"bezier","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"10","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":730.1000518798828,"y":359.200101852417,"wires":[[],[]]},{"id":"8f8ad2ce.ad457","type":"function","z":"deb0d57.1c46528","name":"declare graph values for parent room","func":"var msg = {};\nvar msg1 = {};\n\nmsg.payload=global.get('parenttemp');\nmsg.topic='Temperature';\nmsg1.payload=global.get('parentmotion');\nmsg1.topic='Motion';\nreturn [msg,msg1];","outputs":2,"noerr":0,"x":382.00002670288086,"y":422.0000057220459,"wires":[["a0561d7b.3eee8"],["a0561d7b.3eee8","1b803a04.8b5246"]]},{"id":"a0561d7b.3eee8","type":"ui_chart","z":"deb0d57.1c46528","name":"","group":"ded99fb9.d9d15","order":1,"width":"0","height":"0","label":"Parent Motion Temperature Line Chart","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"bezier","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"10","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":737.0000152587891,"y":417.0000059604645,"wires":[[],[]]},{"id":"5c3f718c.76b2b","type":"twilio out","z":"deb0d57.1c46528","service":"_ext_","twilio":"d290fcfb.07e04","from":"","number":"+6592257223","name":"","x":597.100154876709,"y":593.6001062393188,"wires":[]},{"id":"d82c8d51.63513","type":"function","z":"deb0d57.1c46528","name":"send temp msg","func":"parenttemp = global.get('parenttemp');\nbabytemp = global.get('babytemp');\n\nif (parenttemp >= 30){\nmsg.payload=\"Parent Room temperature at \"+ parenttemp+\n\" is too high\"\nreturn msg;\n}\nif (parenttemp <= 25){\nmsg.payload=\"Parent Room temperature at \"+ parenttemp+\n\" is too low\"\nreturn msg;\n}\nif (babytemp >= 30){\nmsg.payload=\"Baby Room temperature at \"+ babytemp+\n\" is too high\"\nreturn msg;\n}\nif (babytemp <= 25){\nmsg.payload=\"Baby Room temperature at \"+ babytemp+\n\" is too low\"\nreturn msg;\n}","outputs":1,"noerr":0,"x":375.40002822875977,"y":595.0000095367432,"wires":[["5c3f718c.76b2b","c35331fe.73b0a"]]},{"id":"db771f3c.086d2","type":"ibmiot out","z":"deb0d57.1c46528","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"ledid-SLEEPDEEP","deviceType":"led-SLEEPDEEP","eventCommandType":"stopstartparentled","format":"json","data":"{}","qos":"1","name":"My Raspberry Pi Gateway","service":"registered","x":764.0000076293945,"y":1183.9999675750732,"wires":[]},{"id":"1b803a04.8b5246","type":"debug","z":"deb0d57.1c46528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":540.0000076293945,"y":497.00000762939453,"wires":[]},{"id":"34d5c6a7.08515a","type":"ibmiot in","z":"deb0d57.1c46528","authentication":"boundService","apiKey":"","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"gwid-SLEEPDEEP","applicationId":"","deviceType":"gw-SLEEPDEEP","eventType":"+","commandType":"","format":"json","name":"My Raspberry Pi Gateway","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":115,"y":594.0000085830688,"wires":[["31c8039c.e4bf1c","8f8ad2ce.ad457","b3415321.5b116","1b803a04.8b5246","d82c8d51.63513"]]},{"id":"c35331fe.73b0a","type":"debug","z":"deb0d57.1c46528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":582.0000076293945,"y":657.0000095367432,"wires":[]},{"id":"ded99fb9.d9d15","type":"ui_group","z":"","name":"Baby Motion Graph","tab":"40bdccae.821f34","disp":true,"width":"24","collapse":false},{"id":"d290fcfb.07e04","type":"twilio-api","z":"","sid":"AC3bac9ceff25056af0f2bb2a116eb13d6","from":"+19413000772","name":""},{"id":"40bdccae.821f34","type":"ui_tab","z":"deb0d57.1c46528","name":"Motion Graphs","icon":"dashboard"}]